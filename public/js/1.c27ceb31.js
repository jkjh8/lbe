(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"04dd":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",[s("q-toolbar",{staticClass:"bg-white text-grey-10"},[s("q-btn",{attrs:{flat:"",round:"",icon:"home",color:"teal-14",to:"/"}}),s("q-toolbar-title",[s("div",[t._v("롯데 통합 방송 시스템")])]),s("Link"),s("UserStatus",{staticClass:"q-mr-md"})],1)],1),s("q-page-container",[s("router-view")],1)],1)},a=[],i=s("c1df"),r=s.n(i),n={data(){return{time:""}},methods:{clock(){r.a.locale("ko"),this.$store.commit("clock/updateTime",r()()),setInterval((()=>{this.$store.commit("clock/updateTime",r()())}),1e3)}}},l=s("e057"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.user?s("q-btn",{attrs:{round:"",flat:""}},[t.user&&t.user.profile_image?s("q-avatar",{attrs:{color:"teal-14","text-color":"white"}},[s("img",{attrs:{src:t.user.profile_image}})]):s("q-avatar",{attrs:{color:"teal-14","text-color":"white"}},[t._v("\n      "+t._s(t.nickName)+"\n    ")]),s("q-menu",[s("div",{staticClass:"column items-center q-my-md",staticStyle:{width:"200px"}},[t.user&&t.user.profile_image?s("q-avatar",{attrs:{color:"teal-14","text-color":"white",size:"73px"}},[s("img",{attrs:{src:t.user.profile_image}})]):s("q-avatar",{attrs:{color:"teal-14","text-color":"white",size:"73px"}},[t._v("\n          "+t._s(t.nickName)+"\n        ")]),s("div",{staticClass:"q-my-md text-grey"},[t._v(t._s(t.user.email))]),s("q-btn",{staticClass:"q-my-sm q-px-md",attrs:{flat:"",rounded:""},on:{click:function(e){return t.$router.push("/user/profile")}}},[s("div",{staticClass:"text-subtitle2 text-weight-bold"},[t._v("\n            내 프로필\n          ")])]),s("q-btn",{staticClass:"q-px-md text-weight-bold",attrs:{rounded:"",color:"teal-14"},on:{click:t.logout}},[t._v("\n          로그아웃\n        ")])],1)])],1):s("q-btn",{staticClass:"text-weight-bold text-teal-14",attrs:{flat:""},on:{click:function(e){return t.$router.push("/login")}}},[t._v("\n    로그인\n  ")])],1)},u=[],m=s("ded3"),d=s.n(m),h=s("2f62"),g={mixins:[l["a"]],computed:d()(d()({},Object(h["c"])({user:t=>t.user.user})),Object(h["b"])({nickName:"user/nickname"})),mounted(){console.log(this.user)}},p=g,v=s("2877"),f=s("9c40"),b=s("cb32"),q=s("4e73"),x=s("eebe"),$=s.n(x),y=Object(v["a"])(p,c,u,!1,null,null,null),_=y.exports;$()(y,"components",{QBtn:f["a"],QAvatar:b["a"],QMenu:q["a"]});var I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-mx-md"},[s("q-tabs",{staticClass:"text-grey",attrs:{dense:"","indicator-color":"transparent","active-color":"teal"},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},[s("q-route-tab",{staticClass:"qtb",attrs:{to:"/users",tag:"li",exact:""}},[t._v("\n        사용자 관리\n    ")]),s("q-route-tab",{staticClass:"qtb",attrs:{to:"/zones",tag:"li",exact:""}},[t._v("\n      지역 설정\n    ")]),s("q-route-tab",{staticClass:"qtb",attrs:{to:"/logs",tag:"li",exact:""}},[t._v("\n      이벤트 로그\n    ")])],1)],1)},k=[],S={data(){return{index:null}}},w=S,U=(s("67d2"),s("429b")),C=s("7867"),Q=Object(v["a"])(w,I,k,!1,null,"6ad2233d",null),T=Q.exports;$()(Q,"components",{QTabs:U["a"],QRouteTab:C["a"]});var L={name:"MainLayout",mixins:[n,l["a"]],components:{UserStatus:_,Link:T},created(){this.clock()},mounted(){this.getUserInfo()},methods:{},beforeDestroy(){this.logout()}},j=L,O=s("4d5a"),z=s("e359"),E=s("65c6"),N=s("6ac5"),A=s("09e3"),B=Object(v["a"])(j,o,a,!1,null,null,null);e["default"]=B.exports;$()(B,"components",{QLayout:O["a"],QHeader:z["a"],QToolbar:E["a"],QBtn:f["a"],QToolbarTitle:N["a"],QPageContainer:A["a"]})},"5c37":function(t,e,s){},"67d2":function(t,e,s){"use strict";s("5c37")},e057:function(t,e,s){"use strict";e["a"]={data(){return{idSave:!1,header:{},loginUrl:"/auth/local",userInfo:{email:"",password:""}}},methods:{login(t,e){this.loginUrl="local"===t?"/auth/local":"/auth/oauth",this.$axios.post(this.loginUrl,e).then((async t=>{this.getUserInfo(),this.$q.notify({type:"positive",message:"로그인 성공하였습니다.",position:"center",timeout:1e3}),setTimeout((()=>{this.$router.push("/")}),1500)})).catch((t=>{this.$q.notify({type:"negative",message:t.response.data.info.message,position:"center",timeout:1e3}),this.$router.push("/login")}))},register(t){this.$axios.post("/auth/local/register",t).then((t=>{console.log(t),this.$q.notify({type:"positive",message:"회원가입에 성공하였습니다. 로그인 페이지로 이동합니다.",position:"center",timeout:1e3}),setTimeout((()=>{this.$router.push("/login")}),1e3)})).catch((t=>{console.log(t),this.$q.notify({type:"negative",message:t.response.data.message,position:"center",timeout:1e3}),this.$router.push("/register")}))},checkIdSave(){this.idSave="true"===localStorage.getItem("idSave"),this.idSave&&(this.userInfo.email=localStorage.getItem("userId"))},setIdSave(){localStorage.setItem("idSave",this.idSave),this.setUserId()},clearUserId(){localStorage.setItem("idSave",this.idSave),localStorage.removeItem("userId")},setUserId(){localStorage.setItem("userId",this.userInfo.email)},getUserInfo(){this.$axios.get("/auth/get").then((t=>{this.$store.commit("user/updateUser",t.data.user)})).catch((t=>{console.log(t.response.data)}))},getAccessToken(){console.log("not token")},logout(){this.$axios.get("/auth/logout").then((t=>{this.$store.commit("user/updateUser",null),this.$store.commit("eventlog/updateLog",[]),this.$router.push("/"),this.$q.notify({type:"positive",message:"로그아웃 완료하였습니다.",position:"center",timeout:1e3})}))},deleteUser(t){this.$axios.post("/auth/del",t).then((t=>{t.data.success&&(this.$store.commit("user/updateUser",null),this.$store.commit("eventlog/updateLog",[]),this.$q.notify({type:"positive",message:"회원 탈퇴하였습니다. 홈페이지로 이동합니다.",position:"center",timeout:1e3})),this.$router.push("/")})).catch((t=>{this.$q.notify({type:"negative",message:t.response.data.message,position:"center",timeout:1e3})}))}}}}}]);