(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"051b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-card",{staticClass:"q-mx-sm",attrs:{flat:""}},[s("q-card-section",{staticClass:"q-py-xs"},[s("div",[s("div",{staticClass:"text-h6 text-weight-bold"},[e._v("사용자 관리")]),s("div",{staticClass:"text-caption"},[e._v("총 "+e._s(e.usersCount)+"명의 사용자")])])])],1),s("q-separator",{attrs:{inset:""}}),s("q-card-section",{staticClass:"q-pt-sm q-pb-none"},[s("q-table",{attrs:{columns:e.columns,data:e.users,"row-key":"id"},scopedSlots:e._u([{key:"body-cell-createAt",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("div",[e._v("\n            "+e._s(e.timeFormat(t.value))+"\n          ")])])]}},{key:"body-cell-loginAt",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("div",[e._v("\n            "+e._s(e.timeFormat(t.value))+"\n          ")])])]}},{key:"body-cell-level",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-select",{attrs:{options:e.levelOption,value:t.value,dense:"",borderless:""},on:{input:function(s){return e.levelUpdate(s,t.row)}}})],1)]}},{key:"body-cell-admin",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-checkbox",{attrs:{value:t.value,color:"teal-14"},on:{input:function(s){return e.adminUpdate(t.row)}}})],1)]}},{key:"body-cell-actions",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-btn",{attrs:{flat:"",round:"",size:"sm",icon:"delete"},on:{click:function(s){return e.deleteUser(t.row)}}})],1)]}}])})],1),s("q-dialog",{model:{value:e.delUser,callback:function(t){e.delUser=t},expression:"delUser"}},[s("DeleteUser",{attrs:{currentUser:e.currentUser}})],1)],1)},r=[],n=s("ded3"),l=s.n(n),o=s("c1df"),i=s.n(o),c=s("2f62"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticStyle:{width:"400px"}},[s("q-card-section",{staticClass:"q-pb-sm"},[s("div",{staticClass:"text-h6"},[e._v("\n      사용자 삭제\n    ")])]),s("q-card-section",{staticClass:"q-py-sm"},[s("q-item",[s("q-item-section",[s("div",[e._v(e._s(e.currentUser.email))]),s("div",[s("span",[e._v("정말 삭제 하시겠습니까?")])])])],1)],1),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-px-sm",attrs:{label:"확인",color:"teal-14"},on:{click:e.submit}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-px-sm",attrs:{label:"취소",color:"teal-14",flat:""}})],1)],1)},u=[],p={props:["currentUser"],methods:{submit(){this.$axios.post("/auth/deleteUser",this.currentUser).then((e=>{this.$store.commit("user/updateUsers",e.data.users)}))}}},m=p,b=s("2877"),v=s("f09f"),f=s("a370"),h=s("66e5"),q=s("4074"),U=s("eb85"),g=s("4b7e"),C=s("9c40"),x=s("7f67"),_=s("eebe"),Q=s.n(_),w=Object(b["a"])(m,d,u,!1,null,"0d70b43c",null),y=w.exports;Q()(w,"components",{QCard:v["a"],QCardSection:f["a"],QItem:h["a"],QItemSection:q["a"],QSeparator:U["a"],QCardActions:g["a"],QBtn:C["a"]}),Q()(w,"directives",{ClosePopup:x["a"]});var k={components:{DeleteUser:y},computed:l()(l()({},Object(c["c"])({users:e=>e.user.users})),Object(c["b"])({usersCount:"user/usersCount"})),data(){return{columns:[{name:"name",align:"center",label:"Name",field:"name",sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"email",align:"center",label:"이메일",field:"email",sortable:!0},{name:"provider",align:"center",label:"공급자",field:"provider",sortable:!0},{name:"createAt",align:"center",label:"가입일",field:"createAt",sortable:!0},{name:"loginAt",align:"center",label:"접속일",field:"loginAt",sortable:!0},{name:"level",align:"center",label:"등급",field:"level",sortable:!0},{name:"admin",align:"center",label:"관라자",field:"admin",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"actions"}],levelOption:[0,1,2,3,4,5],delUser:!1,currentUser:null}},mounted(){this.getUsers()},methods:{getUsers(){this.$axios.get("/auth/users").then((e=>{this.$store.commit("user/updateUsers",e.data.users),console.log(this.users)})).catch((e=>{403===e.response.status&&console.log("권한이 없습니다.")}))},levelUpdate(e,t){const s={_id:t._id,level:e};this.$axios.post("/auth/updateLevel",s).then((e=>{this.$store.commit("user/updateUsers",e.data.users)})).catch((e=>{console.log(e)}))},deleteUser(e){console.log(e),this.currentUser=e,this.delUser=!0},adminUpdate(e){this.$axios.post("/auth/admin",e).then((e=>{this.$store.commit("user/updateUsers",e.data.users)})).catch((e=>{console.log(e)}))},timeFormat(e){return i()(e).format("YY-MM-DD hh:mm:ss a")}}},$=k,A=s("eaac"),S=s("db86"),D=s("ddd8"),O=s("8f8e"),j=s("24e8"),F=Object(b["a"])($,a,r,!1,null,null,null);t["default"]=F.exports;Q()(F,"components",{QCard:v["a"],QCardSection:f["a"],QSeparator:U["a"],QTable:A["a"],QTd:S["a"],QSelect:D["a"],QCheckbox:O["a"],QBtn:C["a"],QDialog:j["a"]})}}]);