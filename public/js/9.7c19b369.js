(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{daea:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex flex-center"},[s("q-form",{on:{submit:e.onSubmit,reset:e.onReset}},[s("q-card",{staticStyle:{"min-width":"500px"}},[s("q-card-section",{staticClass:"row bg-teal-14 q-py-sm items-center"},[s("div",{staticClass:"text-h6 text-white text-weight-bold"},[s("q-icon",{attrs:{name:"account_circle",size:"md"}}),e._v("\n          로그인\n        ")],1),s("q-space"),s("q-btn",{attrs:{round:"",flat:""},on:{click:function(t){return e.$router.go(-1)}}},[s("q-icon",{attrs:{color:"white",name:"navigate_before"}})],1)],1),s("q-separator"),s("q-card-section",[s("div",{staticClass:"q-mx-md q-mt-md"},[s("div",[s("q-input",{attrs:{outlined:"",label:"E-Mail","lazy-rules":"",rules:e.rules.email},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.userInfo.id,callback:function(t){e.$set(e.userInfo,"id",t)},expression:"userInfo.id"}})],1),s("div",{staticClass:"q-mt-md"},[s("q-input",{attrs:{outlined:"",label:"Password","lazy-rules":"",rules:e.rules.password,type:e.show?"text":"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:e.show?"mdi-eye":"mdi-eye-off"},on:{click:function(t){e.show=!e.show}}})]},proxy:!0}]),model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1)]),s("div",{staticClass:"fit row justify-between q-ml-sm"},[s("div",{staticClass:"column q-ml-sm"},[s("q-checkbox",{attrs:{dense:"",label:"아이디 저장",color:"teal-14"},on:{input:e.saveIdCheckbox},model:{value:e.idSave,callback:function(t){e.idSave=t},expression:"idSave"}}),s("q-checkbox",{staticClass:"q-mt-sm",attrs:{dense:"",label:"로그인 유지",color:"orange-14"},model:{value:e.userInfo.keepLoggedIn,callback:function(t){e.$set(e.userInfo,"keepLoggedIn",t)},expression:"userInfo.keepLoggedIn"}})],1),s("q-btn",{attrs:{flat:"",color:"orange-10",to:"/register"}},[e._v("회원가입")])],1)]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"q-px-sm",attrs:{label:"로그인",type:"submit",color:"teal-14"}}),s("q-btn",{staticClass:"q-px-sm",attrs:{label:"초기화",type:"reset",color:"teal-14",flat:""}})],1)],1)],1)],1)},a=[],i=s("e057"),n={mixins:[i["a"]],data(){return{show:!1,idSave:!1,userInfo:{id:"",password:"",keepLoggedIn:!1},rules:{email:[e=>!!e||"E-main is required",e=>/.+@.+\..+/.test(e)||"Not in E-mail format"],password:[e=>e.length>=8||"At least 8 characters are required"]}}},mounted(){this.checkIdSave()},methods:{onSubmit(){this.login("local",this.userInfo),this.idSave&&this.setUserId()},onReset(){this.userInfo={id:"",password:"",keepLoggedIn:!1}},saveIdCheckbox(e){e?this.setIdSave():this.clearUserId()}}},r=n,l=s("2877"),c=s("9989"),u=s("0378"),d=s("f09f"),h=s("a370"),m=s("0016"),p=s("2c91"),g=s("9c40"),f=s("eb85"),v=s("27f9"),I=s("8f8e"),q=s("4b7e"),y=s("eebe"),b=s.n(y),k=Object(l["a"])(r,o,a,!1,null,null,null);t["default"]=k.exports;b()(k,"components",{QPage:c["a"],QForm:u["a"],QCard:d["a"],QCardSection:h["a"],QIcon:m["a"],QSpace:p["a"],QBtn:g["a"],QSeparator:f["a"],QInput:v["a"],QCheckbox:I["a"],QCardActions:q["a"]})},e057:function(e,t,s){"use strict";t["a"]={data(){return{idSave:!1,header:{},loginUrl:"/auth/local",userInfo:{email:"",password:""}}},methods:{login(e,t){this.loginUrl="local"===e?"/auth/local":"/auth/oauth",this.$axios.post(this.loginUrl,t).then((async e=>{this.getUserInfo(),this.$q.notify({type:"positive",message:"로그인 성공하였습니다.",position:"center",timeout:1e3}),setTimeout((()=>{this.$router.push("/")}),1500)})).catch((e=>{this.$q.notify({type:"negative",message:e.response.data.info.message,position:"center",timeout:1e3}),this.$router.push("/login")}))},register(e){this.$axios.post("/auth/local/register",e).then((e=>{console.log(e),this.$q.notify({type:"positive",message:"회원가입에 성공하였습니다. 로그인 페이지로 이동합니다.",position:"center",timeout:1e3}),setTimeout((()=>{this.$router.push("/login")}),1e3)})).catch((e=>{console.log(e),this.$q.notify({type:"negative",message:e.response.data.message,position:"center",timeout:1e3}),this.$router.push("/register")}))},checkIdSave(){this.idSave="true"===localStorage.getItem("idSave"),this.idSave&&(this.userInfo.email=localStorage.getItem("userId"))},setIdSave(){localStorage.setItem("idSave",this.idSave),this.setUserId()},clearUserId(){localStorage.setItem("idSave",this.idSave),localStorage.removeItem("userId")},setUserId(){localStorage.setItem("userId",this.userInfo.email)},getUserInfo(){this.$axios.get("/auth/get").then((e=>{this.$store.commit("user/updateUser",e.data.user)})).catch((e=>{console.log(e.response.data)}))},getAccessToken(){console.log("not token")},logout(){this.$axios.get("/auth/logout").then((e=>{this.$store.commit("user/updateUser",null),this.$store.commit("eventlog/updateLog",[]),this.$router.push("/"),this.$q.notify({type:"positive",message:"로그아웃 완료하였습니다.",position:"center",timeout:1e3})}))},deleteUser(e){this.$axios.post("/auth/del",e).then((e=>{e.data.success&&(this.$store.commit("user/updateUser",null),this.$store.commit("eventlog/updateLog",[]),this.$q.notify({type:"positive",message:"회원 탈퇴하였습니다. 홈페이지로 이동합니다.",position:"center",timeout:1e3})),this.$router.push("/")})).catch((e=>{this.$q.notify({type:"negative",message:e.response.data.message,position:"center",timeout:1e3})}))}}}}}]);