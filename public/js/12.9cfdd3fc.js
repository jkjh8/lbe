(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"21d7":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex flex-center"},[s("q-form",{on:{submit:e.onSubmit,reset:e.onReset}},[s("q-card",{staticStyle:{"min-width":"500px"}},[s("q-card-section",{staticClass:"bg-teal-14"},[s("div",{staticClass:"text-h6 text-white"},[e._v("회원가입")])]),s("q-separator"),s("q-card-section",[s("div",{staticClass:"q-mx-md q-mt-md"},[s("div",[s("q-input",{attrs:{outlined:"",label:"이름","lazy-rules":"",rules:e.rules.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),s("div",{staticClass:"q-mt-md"},[s("q-input",{attrs:{outlined:"",label:"이메일","lazy-rules":"",rules:e.rules.email},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),s("div",{staticClass:"q-mt-md"},[s("q-input",{attrs:{outlined:"",label:"비밀번호","lazy-rules":"",rules:e.rules.password,type:e.show?"text":"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:e.show?"mdi-eye":"mdi-eye-off"},on:{click:function(t){e.show=!e.show}}})]},proxy:!0}]),model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),s("div",{staticClass:"q-mt-md"},[s("q-input",{attrs:{outlined:"",label:"비밀번호 확인","lazy-rules":"",rules:e.rules.chkpassword,type:e.chkshow?"text":"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:e.chkshow?"mdi-eye":"mdi-eye-off"},on:{click:function(t){e.chkshow=!e.chkshow}}})]},proxy:!0}]),model:{value:e.userInfo.chkpassword,callback:function(t){e.$set(e.userInfo,"chkpassword",t)},expression:"userInfo.chkpassword"}})],1)])]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"q-px-md",attrs:{label:"확인",type:"submit",color:"teal-14"}}),s("q-btn",{staticClass:"q-px-sm q-ml-sm",attrs:{label:"초기화",type:"reset",color:"teal-14",flat:""}})],1)],1)],1)],1)},a=[],i=s("e057"),n={mixins:[i["a"]],data(){return{show:!1,chkshow:!1,userInfo:{name:"",email:"",password:"",chkpassword:""},rules:{name:[e=>!!e||"name is required"],email:[e=>!!e||"E-main is required",e=>/.+@.+\..+/.test(e)||"Not in E-mail format"],password:[e=>e.length>=8||"At least 8 characters are required"],chkpassword:[e=>e.length>=8||"At least 8 characters are required",e=>e===this.userInfo.password||"Passwords do not match."]}}},methods:{onSubmit(){const e=this.userInfo;e.id=this.userInfo.email,e.provider="local",e.createAt=Date.now(),e.updateAt=Date.now(),this.register(e)},onReset(){this.userInfo={name:"",email:"",password:"",chkpassword:""}}}},r=n,l=s("2877"),u=s("9989"),c=s("0378"),d=s("f09f"),m=s("a370"),p=s("eb85"),h=s("27f9"),f=s("0016"),g=s("4b7e"),y=s("9c40"),k=s("eebe"),w=s.n(k),I=Object(l["a"])(r,o,a,!1,null,null,null);t["default"]=I.exports;w()(I,"components",{QPage:u["a"],QForm:c["a"],QCard:d["a"],QCardSection:m["a"],QSeparator:p["a"],QInput:h["a"],QIcon:f["a"],QCardActions:g["a"],QBtn:y["a"]})},e057:function(e,t,s){"use strict";t["a"]={data(){return{idSave:!1,header:{},loginUrl:"/auth/local",userInfo:{email:"",password:""}}},methods:{login(e,t){this.loginUrl="local"===e?"/auth/local":"/auth/oauth",this.$axios.post(this.loginUrl,t).then((async e=>{this.getUserInfo(),this.$q.notify({type:"positive",message:"로그인 성공하였습니다.",position:"center",timeout:1e3}),setTimeout((()=>{this.$router.push("/")}),1500)})).catch((e=>{this.$q.notify({type:"negative",message:e.response.data.info.message,position:"center",timeout:1e3}),this.$router.push("/login")}))},register(e){this.$axios.post("/auth/local/register",e).then((e=>{console.log(e),this.$q.notify({type:"positive",message:"회원가입에 성공하였습니다. 로그인 페이지로 이동합니다.",position:"center",timeout:1e3}),setTimeout((()=>{this.$router.push("/login")}),1e3)})).catch((e=>{console.log(e),this.$q.notify({type:"negative",message:e.response.data.message,position:"center",timeout:1e3}),this.$router.push("/register")}))},checkIdSave(){this.idSave="true"===localStorage.getItem("idSave"),this.idSave&&(this.userInfo.email=localStorage.getItem("userId"))},setIdSave(){localStorage.setItem("idSave",this.idSave),this.setUserId()},clearUserId(){localStorage.setItem("idSave",this.idSave),localStorage.removeItem("userId")},setUserId(){localStorage.setItem("userId",this.userInfo.email)},getUserInfo(){this.$axios.get("/auth/get").then((e=>{this.$store.commit("user/updateUser",e.data.user)})).catch((e=>{console.log(e.response.data)}))},getAccessToken(){console.log("not token")},logout(){this.$axios.get("/auth/logout").then((e=>{this.$store.commit("user/updateUser",null),this.$store.commit("eventlog/updateLog",[]),this.$router.push("/"),this.$q.notify({type:"positive",message:"로그아웃 완료하였습니다.",position:"center",timeout:1e3})}))},deleteUser(e){this.$axios.post("/auth/del",e).then((e=>{e.data.success&&(this.$store.commit("user/updateUser",null),this.$store.commit("eventlog/updateLog",[]),this.$q.notify({type:"positive",message:"회원 탈퇴하였습니다. 홈페이지로 이동합니다.",position:"center",timeout:1e3})),this.$router.push("/")})).catch((e=>{this.$q.notify({type:"negative",message:e.response.data.message,position:"center",timeout:1e3})}))}}}}}]);