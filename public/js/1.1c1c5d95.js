(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"02c2":function(e,t,s){"use strict";s("ef54")},"04dd":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",[s("q-toolbar",{staticClass:"bg-white text-grey-10"},[s("q-btn",{attrs:{flat:"",round:"",icon:"home",color:"teal-14",to:"/"}}),s("q-toolbar-title",[s("div",[e._v("롯데 통합 방송 시스템")])]),s("Link"),s("UserStatus")],1)],1),s("q-page-container",[s("router-view")],1)],1)},a=[],i=s("c1df"),n=s.n(i),r={data(){return{time:""}},methods:{clock(){n.a.locale("ko"),this.$store.commit("clock/updateTime",n()()),setInterval((()=>{this.$store.commit("clock/updateTime",n()())}),1e3)}}},c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.user?s("q-btn",{attrs:{round:"",flat:""}},[s("q-avatar",{attrs:{color:"teal-14","text-color":"white"}},[e._v("\n      "+e._s(e.nickName)+"\n    ")]),s("q-menu",[s("div",{staticClass:"column items-center q-my-md",staticStyle:{width:"200px"}},[s("q-avatar",{attrs:{color:"teal-14","text-color":"white",size:"73px"}},[e._v("\n          "+e._s(e.nickName)+"\n        ")]),s("div",{staticClass:"q-my-md"},[e._v(e._s(e.user.email))]),s("q-btn",{staticClass:"q-px-md text-weight-bold",attrs:{rounded:"",color:"teal-14"},on:{click:e.logout}},[e._v("\n          로그아웃\n        ")])],1)])],1):s("q-btn",{staticClass:"text-weight-bold text-teal-14",attrs:{flat:""},on:{click:function(t){return e.$router.push("/login")}}},[e._v("\n    로그인\n  ")])],1)},l=[],u=s("ded3"),d=s.n(u),h=s("2f62"),m=s("e057"),p={mixins:[m["a"]],computed:d()(d()({},Object(h["c"])({user:e=>e.user.user})),Object(h["b"])({nickName:"user/nickname"}))},k=p,v=s("2877"),f=s("9c40"),g=s("cb32"),$=s("4e73"),b=s("eebe"),x=s.n(b),q=Object(v["a"])(k,c,l,!1,null,null,null),T=q.exports;x()(q,"components",{QBtn:f["a"],QAvatar:g["a"],QMenu:$["a"]});var w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-mx-md"},[s("q-tabs",{staticClass:"text-grey",attrs:{dense:"","indicator-color":"transparent","active-color":"teal"},model:{value:e.index,callback:function(t){e.index=t},expression:"index"}},[s("q-route-tab",{attrs:{to:"/logs",tag:"li",exact:""}},[e._v("\n      이벤트 로그\n    ")])],1)],1)},I=[],_={data(){return{index:null}}},y=_,S=(s("02c2"),s("429b")),Q=s("7867"),U=Object(v["a"])(y,w,I,!1,null,"f515019e",null),C=U.exports;x()(U,"components",{QTabs:S["a"],QRouteTab:Q["a"]});var j={name:"MainLayout",mixins:[r],components:{UserStatus:T,Link:C},created(){this.clock()},methods:{}},L=j,O=s("4d5a"),A=s("e359"),B=s("65c6"),E=s("6ac5"),N=s("09e3"),z=Object(v["a"])(L,o,a,!1,null,null,null);t["default"]=z.exports;x()(z,"components",{QLayout:O["a"],QHeader:A["a"],QToolbar:B["a"],QBtn:f["a"],QToolbarTitle:E["a"],QPageContainer:N["a"]})},e057:function(e,t,s){"use strict";t["a"]={data(){return{idSave:!1,header:{},userInfo:{email:"",password:""}}},methods:{login(e){this.$axios.post("/auth/local",e).then((async e=>{await this.updateUserInfoToCookie(e.data),this.getUserInfo(),this.$q.notify({type:"positive",message:"로그인이 성공하였습니다.",position:"center",timeout:1e3}),setTimeout((()=>{this.$router.push("/")}),1500)})).catch((e=>{console.log(e.response.data),this.$q.notify({type:"negative",message:e.response.data.info.message,position:"center",timeout:1e3})}))},updateUserInfoToCookie(e){this.$cookie.set("accessToken",e.accessToken),this.$cookie.set("refreshToken",e.refreshToken),this.$store.commit("user/updateRefreshToken",e.refreshToken)},checkIdSave(){this.idSave="true"===this.$cookie.get("idSave"),this.idSave&&(this.userInfo.email=this.$cookie.get("userId"))},setIdSave(){this.$cookie.set("idSave",this.idSave),this.setUserId()},clearUserId(){this.$cookie.set("idSave",this.idSave),this.$cookie.delete("userId")},setUserId(){this.$cookie.set("userId",this.userInfo.email)},getUserInfo(){const e=this.$cookie.get("accessToken");if(!e)return this.getAccessToken();this.$axios.get("/auth/get",{headers:{Authorization:`Bearer ${e}`}}).then((e=>{this.$store.commit("user/updateUser",e.data.user)})).catch((e=>{console.log(e.response.data)}))},getAccessToken(){console.log("not token")},logout(){this.$axios.get("/auth/logout").then((e=>{console.log(e),this.$cookie.delete("accessToken"),this.$store.commit("user/updateUser",null),this.$router.push("/"),this.$q.notify({type:"positive",message:"로그아웃 완료하였습니다.",position:"center",timeout:1e3})}))}}}},ef54:function(e,t,s){}}]);